%% osm-fonctionnement.tex
%%


\section{Fonctionnement}

\frame[plain]{  \heading{Plan de la Présentation}
\ecmsetupplan
\begin{itemize}
  \item[\small $\Diamond$] Introduction
  \item[\small $\Diamond$] {\color{purple}\textbf{Fonctionnement}}
  \item[\small $\Diamond$] Applications
  \item[\small $\Diamond$] Communauté
  \item[\small $\Diamond$] Conclusions
\end{itemize}
}


\frame { \heading{Fonctionnement} \vfill

  \includegraphics[width=\textwidth]{figures/OSM-steps}

  \begin{enumerate}
  \item Collecter les données
  \item Transférer les données GPS
  \item Générer et éditer les données OSM
  \item Ajouter des labels et des méta-data
  \item Exploiter les données (générer un rendu)
  \end{enumerate}
}


\frame { \heading{Collecte des données}
  \begin{tikzpicture}[remember picture,overlay]
   \node[xshift=-1cm,yshift=-1.3cm] at (current page.north east) {\includegraphics[width=2cm]{figures/OSM-step1}};
  \end{tikzpicture}

  Sources de données:
  \begin{itemize}
  \item logs GPS crées à pied, à vélo, en voiture, en train, avec notes et photos du trajet
  \item Cadastre numérique (en France)
  \item photos satellite Yahoo! (dans les zones couvertes)
  \item CORINE land cover (en Europe)
  \item imagerie satellite Landsat 7
  \item TIGER (aux USA)
  \item AND (Pays Bas, Chine, Inde)
  \end{itemize}

  \bigskip
  {\Large\color{red}\Stopsign{}} Interdiction d'utiliser les cartes propriétaires!
}


\frame { \heading{Transfert des données}
  \begin{tikzpicture}[remember picture,overlay]
   \node[xshift=-1cm,yshift=-1.3cm] at (current page.north east) {\includegraphics[width=2cm]{figures/OSM-step2}};
  \end{tikzpicture}
  \vfil
  
  \begin{itemize}
  \item Transférer les données vers l'ordinateur
  \item Conversion au format GPX et suppression points redondants
    \begin{itemize}
    \item outil: GPSBabel, viking
    \end{itemize}
  \item Upload des tracks vers OSM via le site web
    \begin{itemize}
    \item nécessite un compte openstreetmap
    \end{itemize}
  \end{itemize}
}


\frame { \heading{Générer des données OSM}
  \begin{tikzpicture}[remember picture,overlay]
   \node[xshift=-1cm,yshift=-1.3cm] at (current page.north east) {\includegraphics[width=2cm]{figures/OSM-step3}};
  \end{tikzpicture}

  \begin{minipage}{0.8\textwidth}
  Adapter les données brutes aux besoins de la carte (simplification
  du tracé, correction des erreurs, \dots{})
  \end{minipage}
 
  \begin{itemize}
  \item Un \textit{n\oe{}ud} est un point représentant une position
  \item Un \textit{way} (ou chemin) est une séquence de n\oe{}uds
  \item Si elle est fermée, la séquence représente une zone
  \end{itemize}

  \vfil
  \begin{center}\includegraphics[width=0.5\textwidth]{figures/datamodel}\end{center}
}



\frame { \heading{Édition des données}
  \begin{tikzpicture}[remember picture,overlay]
   \node[xshift=-1cm,yshift=-1.3cm] at (current page.north east) {\includegraphics[width=2cm]{figures/OSM-step4}};
  \end{tikzpicture}
  \vfill
  
  Il faut maintenant \textbf{donner un sens} à tous ces points et toutes ces lignes
  (routes, ponts, bâtiments, ligne de bus, \dots{})
  
  \begin{itemize}
  \item Une \textit{relation} est un ensemble de n\oe{}uds et de ways
    auxquels on donne des propriétés
  \item Une \textit{étiquette} (ou tag) peut être appliquée à un n\oe{}ud, un
    way ou une relation, et consiste de paires \texttt{nom=valeur}
  \end{itemize}
  
\bigskip
La sémantique des étiquettes est \href{http://wiki.openstreetmap.org/index.php/Map_Features}
{décrite sur un wiki}.
}


\frame{ \heading{Étiquettage}
  \begin{tikzpicture}[remember picture,overlay]
   \node[xshift=-1cm,yshift=-1.3cm] at (current page.north east) {\includegraphics[width=2cm]{figures/OSM-step4}};
  \end{tikzpicture}

  \includegraphics[width=0.99\textwidth]{figures/osm-tagging-toulouse}

  \vfill{\tiny\textit{c.f.} \url{http://wiki.openstreetmap.org/index.php/Map\_Features}}
}
  
%   Exemples:
%   \begin{itemize}
%   \item highway = motorway
%   \item junction = roundabout
%   \item oneway = yes
%   \item cycleway = lane
%   \item waterway = canal
%   \item railway = station
%   \item railway = subway
%   \item leisure = park
%   \item amenity = pub
%   \item shop = supermarket
%   \item tourism = zoo
%   \end{itemize}


\frame{\heading{Édition en ligne}
  \begin{tikzpicture}[remember picture,overlay]
   \node[xshift=-1cm,yshift=-1.3cm] at (current page.north east) {\includegraphics[width=2cm]{figures/OSM-step4}};
  \end{tikzpicture}
  \vfill
  
  \begin{minipage}{0.45\textwidth}
    Potlatch
    \begin{itemize}
    \item Service officiel (onglet ``Edit'')
    \item Coordonnées synchronisées avec la vue
    \item Validation manuelle ou automatique
    \item Accès aux données GPS
    \end{itemize}
    
    Développement actif pour le rendre toujours plus accessible.
    (Potlatch2)
  \end{minipage} \quad %
  \begin{minipage}{0.49\textwidth}
    \includegraphics[width=\textwidth]{figures/potlatch}
  \end{minipage}
}
 
\frame{ \heading{Édition hors-ligne}
  \begin{tikzpicture}[remember picture,overlay]
   \node[xshift=-1cm,yshift=-1.3cm] at (current page.north east) {\includegraphics[width=2cm]{figures/OSM-step4}};
  \end{tikzpicture}
  \vfill

  \begin{minipage}{0.45\textwidth}
    JOSM
    \begin{itemize}
    \item Plus riche
    \item Plus souple
    \item Plugins variés
    \end{itemize}
 
    Mercartor
    \begin{itemize}
    \item Mêmes objectifs que JOSM
    \item Plus léger
    \item Moins stable
    \end{itemize}
    \end{minipage} \quad %
  \begin{minipage}{0.49\textwidth}
    \includegraphics[width=\textwidth]{figures/JOSM}
  \end{minipage}
}
 
\frame{ \heading{Outils de validation} \vfill
\setbeamercovered{dynamic}
\hskip-1cm %
\begin{minipage}{0.32\textwidth}
\begin{itemize}
\item<1-> plugin validator de JOSM
\item<2-> Keepright! % http://keepright.ipax.at
\item<3-> Osmose % http://osmose.openstreetmap.fr
\item<4-> OpenStreetBugs % http://openstreetbugs.appspot.com/
\item<5-> OSM Inspector % http://tools.geofabrik.de/osmi/
\item<6-> MapCompare % http://tools.geofabrik.de/mc/
\item<7-> moteurs de routage
\end{itemize}
\end{minipage} %
\begin{minipage}{0.72\textwidth}
\only<2>{\includegraphics[width=\textwidth]{figures/keepright}}
\only<3>{\includegraphics[width=\textwidth]{figures/osmose}}
\only<4>{\includegraphics[width=\textwidth]{figures/openstreetbugs}}
\only<5>{\includegraphics[width=\textwidth]{figures/osminspector}}
\only<6>{\includegraphics[width=\textwidth]{figures/mapcompare}}

\end{minipage}
}


\frame { \heading{Rendu de la carte}
  \begin{tikzpicture}[remember picture,overlay]
   \node[xshift=-1cm,yshift=-1.3cm] at (current page.north east) {\includegraphics[width=2cm]{figures/OSM-step5}};
  \end{tikzpicture}
  \vfil
  
  \begin{itemize}
  \item Se fait automatiquement une fois que les données sont transférées
    vers le serveur

  \item Application Mapnik
    \begin{itemize}
    \item pré-traitement avec PostGIS pour accélérer le rendu
    \item rendu mis à jour en quelques heures
    \end{itemize}

  \item Application Osmarender (pipeline XSLT)
    \begin{itemize}
    \item possiblité d'utiliser des feuilles de styles XSLT personnalisées pour
      obtenir des cartes spécialisées
    \end{itemize}

  \item Visualisation des tuiles depuis une interface web (Slippymap)
    ou depuis applications spécialisées (Viking, Marble) ou utilisant
    des composants (libchamplain, Marble widget)
  \end{itemize}
}

% \frame { \hfill \includegraphics[width=2cm]{figures/OSM-step5}
% 
%   %% http://wiki.openstreetmap.org/wiki/List_of_OSM_based_Services
%   Plusieurs jeux de tuiles spécialisés existent:
%   \begin{itemize}
%   \item \href{http://www.opencyclemap.org/}{OpenCycleMap.org}, pistes cyclables, avec topographie
%   \item \href{http://www.openpistemap.org/}{OpenPisteMap.org}, carte des pistes
%   \item \href{http://www.öpnvkarte.de/}{öpnvkarte.de}, transports en commun
%   \item \href{http://www.openseamap.org/}{OpenSeaMap.org}, navigation en mer
%   \item \href{http://www.osm-wms.de/}{WMS OSM}, services de mesurage 
%   \end{itemize}
% }



\frame{\centering OpenCycleMap.org\newline\vfil\includegraphics[width=0.95\textwidth]{figures/open-cycle-map}}
\frame{\centering Letuffe.org Hiking\newline\vfil\includegraphics[width=0.95\textwidth]{figures/hiking-letuffe}}
\frame{\centering OpenPisteMap.org\newline\vfil\includegraphics[height=0.94\textheight]{figures/open-piste-map}}
\frame{\centering öpenvkarte.de\newline\vfil\includegraphics[width=0.98\textwidth]{figures/opnvkarte}}
\frame{\centering OpenSeaMap.org\newline\vfil\includegraphics[width=0.98\textwidth]{figures/open-sea-map}}
\frame{\centering osm-wms.de\newline\vfil\includegraphics[width=0.98\textwidth]{figures/OSM-WMS}}
\frame{\centering TopOSM.com\newline\vfil\includegraphics[width=0.99\textwidth]{figures/toposm}}


% http://github.com/guyou/osm-toulibre-200912/tree/7bad3e946b606952b8ecfe1849afcab83bc7e645


%% EOF
